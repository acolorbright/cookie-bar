var CookieBar=function(){function e(){function e(){if(b.abort(),console.log("cookieBAR - Timeout for ip geolocalion"),document.cookie.length>0||window.localStorage.length>0){var e=i();void 0===e&&n()}}function n(){var e=r(),t="";g("theme")&&(t="-"+g("theme"));var o=f.replace(/[^\/]*$/,""),n=document.createElement("link");n.setAttribute("rel","stylesheet"),n.setAttribute("href",o+"cookiebar"+t+".min.css"),document.head.appendChild(n);var a=new XMLHttpRequest;a.open("GET",o+"lang/"+e+".html",!0),a.onreadystatechange=function(){if(4===a.readyState&&200===a.status){var e=document.createElement("div");e.innerHTML=a.responseText,document.getElementsByTagName("body")[0].appendChild(e),y=document.getElementById("cookie-bar"),v=document.getElementById("cookie-bar-button"),privacyPolicyLink=document.getElementById("cookie-bar-privacy-policy-link"),g("top")?(y.style.top=0,s("top")):(y.style.bottom=0,s("bottom"));var t;if(t=g("privacyPage")?decodeURIComponent(g("privacyPage")):"http://www.redbull.com/pp/en_INT",privacyPolicyLink.href=t,g("bgColor")){var o=decodeURIComponent(g("bgColor"));y.style.backgroundColor="#"+o}if(g("textColor")){var n=decodeURIComponent(g("textColor"));y.style.color="#"+n}if(g("linkColor")){var r=decodeURIComponent(g("linkColor"));privacyPolicyLink.style.color="#"+r}p(),d(y),s()}},a.send()}function a(){for(var e=document.getElementsByTagName("script"),t=0;t<e.length;t++)if(e[t].hasAttribute("src")){var o=e[t].src;if(o.indexOf("cookiebar")>-1)return o}}function r(){var e=g("forceLang");return e===!1&&(e=navigator.language||navigator.userLanguage),e=e.substr(0,2),t.indexOf(e)<0&&(e="en"),e}function i(){var e=document.cookie.match(/(;)?cookiebar=([^;]*);?/);return null==e?void 0:decodeURI(e)[2]}function c(e,t){var o=30;g("remember")&&(o=g("remember"));var n=new Date;n.setDate(n.getDate()+parseInt(o));var a=encodeURI(t)+(null===o?"":"; expires="+n.toUTCString()+";path=/");document.cookie=e+"="+a}function l(){document.cookie.split(";").forEach(function(e){document.cookie=e.replace(/^ +/,"").replace(/=.*/,"=;expires="+(new Date).toUTCString()+";path=/")}),localStorage.clear()}function d(e){var t=e.style;t.display="block"}function m(e){var t=e.style;t.display="none"}function s(e){setTimeout(function(){var t=document.getElementById("cookie-bar").clientHeight;switch(e){case"top":document.getElementsByTagName("body")[0].style.marginTop=t+"px";break;case"bottom":document.getElementsByTagName("body")[0].style.marginBottom=t+"px"}},300)}function u(){var e=document.getElementById("cookie-bar").clientHeight;if(g("top")){var t=parseInt(document.getElementsByTagName("body")[0].style.marginTop);document.getElementsByTagName("body")[0].style.marginTop=t-e+"px"}else{var o=parseInt(document.getElementsByTagName("body")[0].style.marginBottom);document.getElementsByTagName("body")[0].style.marginBottom=o-e+"px"}}function g(e){var t=f.split(e+"=");return t[1]?t[1].split(/[&?]+/)[0]:!1}function p(){v.addEventListener("click",function(){c("cookiebar","CookieAllowed"),u(),m(y)})}var y,v,f=a();"CookieDisallowed"==i()&&(l(),c("cookiebar","CookieDisallowed"));var b=new XMLHttpRequest;b.open("GET","//www.telize.com/geoip",!0),b.onreadystatechange=function(){if(4===b.readyState&&200===b.status){clearTimeout(k);var e=JSON.parse(b.responseText).country_code;if(o.indexOf(e)>-1)if(g("always")){var t=i();void 0===t&&n()}else if(document.cookie.length>0||window.localStorage.length>0){var t=i();void 0===t&&n()}}},b.send();var k=setTimeout(e,1500)}var t=["en","de"],o=["BE","BG","CZ","DK","DE","EE","IE","EL","ES","FR","IT","CY","LV","LT","LU","HU","MT","NL","AT","PL","PT","RO","SI","SK","FI","SE","GB"];return{setup:e}};document.addEventListener("DOMContentLoaded",function(){(new CookieBar).setup()});
